<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Scope in Javascript</title>
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
			<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
			<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
						<!--
			<script src="pseudocode.js"></script>
	    	-->
	    	<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	    	<link type="text/css" rel="stylesheet" href="styles.css">
	</head>
	<body>
		<div class="header">
			<div class="container">
				<h1>Scope in Javascript</h1>
			</div>
		</div>
		<div class="container panel panel-default">
			<div class="row">
				<div class="col-sm-12 col-md-12 col-lg-12">
					<div class="panel-heading">
						<h2>Table of Contents</h2>
					</div>
					<div class="panel-body">
					<ol>
							<li><a href="#what">What is Scope?</a></li>
							<li><a href="#how">How Scope Works in Javascript</a>
								<ol>
									<li><a href="#how-global">Global Scope</a></li>
									<li><a href="#how-local">Local Scope</a></li>
									<li><a href="#how-shadowing">Shadowing</a></li>
									<li><a href="#how-hoisting">Hoisting & Block Scope...Not!</a></li>
								</ol>
							</li>
							<li><a href="#try">Try It Yourself</a></li>
						</ol>
					</div>
				</div>
			</div>
		</div>
		<div class="container" id="what">
			<div class="row">
				<div class="col-md-12 col-lg-12 col-sm-12">
					<h2>What is Scope?</h2>
					<p>In programming, the notion of <strong>scope</strong> refers to when variables can and cannot be referenced depending on where the variable is called.</p>
					<p>If a variable is <em>in scope</em>, then it can be referenced.</p>
					<p>If a variable is <em>out of scope</em>, then referencing it will result in either an undefined value or a program error.</p>
					<p>Below is an example of a scope. Hover over a variable declaration to show where the variable is in scope.</p>
					<p>Hint: There are there variables here: <code>x</code>, <code>num</code>, and <code>sum</code>.</p>
					<div class="well">
						<span id="var-what-global">var x = 3;</span><br />
						<br />
						<span id="scope-what-global">function getNewNumber(<span id="var-what-arg">num</span>) {<br />
						<span id="scope-what-arg"><span class="indent"></span><span id="var-what-local">var sum = num + x;</span><br />
						<span id="scope-what-local"><span class="indent"></span>console.log(sum);</span></span><br />
						}<br />
						getNewNumber(8);<br />
						x = 5;<br />
						getNewNumber(10);</span><br />
					</div>
					<p>You don't need to get what's going on just yet, but read on for more...</p>
				</div>
			</div>
		</div>
		<div class="container" id="how">
			<div class="row">
				<div class="col-md-12 col-lg-12 col-sm-12">
					<h2>How Scope Works in Javascript</h2>
					<div id="how-global">
						<h3>Global Scope</h3>
						<p><strong>Global</strong> variables can be referenced anywhere in a program.</p>
						<p>A variable is <em>global</em> if it is declared <em>outside</em> of a function.</p>
						<p>In the program below, <code>x</code> is global.</p>
						<p>Global variables can be referenced and modified both inside and outside of functions. In other words, they can be read and manipulated anywhere!</p>
						<div class="well">
							<span id="var-global-global">var x = 3;</span><br />
							<span id="scope-global-global">console.log(x); // prints "3"<br />
							function doSomething() {<br />
							<span class="indent"></span>x = 5;<br />
							<span class="indent"></span>console.log(x);<br />
							}<br />
							doSomething();</span>
						</div>
						<form>
						  <div class="form-group">
							<button class="btn btn-sm btn-primary" id="check-global-global" type="button" role="button">At the end, x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-global-global" id="show-global-global" readonly>
						    <!-- <p class="help-block">Example block-level help text here.</p> -->
						  </div>
						</form>
						<p>Note that <code>var x = 3;</code> isn't highlighted, while everything else is. That's because <code>x</code> is still being defined in that one line.</p>
						<p>For this lesson, when we point out the scope of a variable we refer to when its value can be referenced and is defined rather than undefined. This is because for an overwhelming majority of cases where you want to reference a variable, if not all of them, you want your variable to be defined!</p>
					</div>
					<div id="how-local">
						<h3>Local Scope</h3>
						<p><strong>Local</strong> variables can only be referenced in certain places.</p>
						<p>A variable is <em>local</em> if it is declared <em>inside</em> of a function. A local variable can only be referenced inside the function it's defined in.</p>
						<p>In the program below, <code>y</code> is local to the function <code>doThing()</code>. <code>x</code> and <code>z</code> are global to the program.</p>
						<div class="well">
							<span id="var-local-global1">var x = 3;</span><br />
							<span id="scope-local-global1">function doThing() {<br />
							<span id="var-local-local"><span class="indent"></span>var y = 5;</span><br />
							<span id="scope-local-local"><span class="indent"></span>console.log(y); // prints "5"</span><br />
							}<br />
							<span id="var-local-global2">var z = 7;</span><br />
							<span id="scope-local-global2">console.log(x);<br />
							console.log(y); // won't work! You'll get an error here.<br />
							console.log(z);</span></span>
						</div>
						<form>
						  <div class="form-group">
							<button class="btn btn-sm btn-primary" id="check-local-global1" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-global1" id="show-local-global1" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-local" type="button" role="button">Now y is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-local" id="show-local-local" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-global2" type="button" role="button">Now z is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-global2" id="show-local-global2" readonly>
						    <!-- <p class="help-block">Example block-level help text here.</p> -->
						  </div>
						</form>
						<p>All function arguments are local.</p>
						<p>For the next example, hover over <code>logMe</code> inside the parentheses (instead of anywhere on the line) to highlight the places where it's in scope!</p>
						<div class="well">
							function printAThing(<span id="var-local-arg-arg">logMe</span>) {<br />
							<span class="indent"></span><span id="scope-local-arg-arg">console.log(logMe);</span><br />
							}<br />
							<span id="var-local-arg-global">var aString = "Hello world";</span><br />
							<span id="scope-local-arg-global">printAThing(aString);<br />
							console.log(aString); // Prints "Hello world"<br />
							console.log(logMe); // Error! <br /></span>
						</div>
						<form>
						  <div class="form-group">
							<button class="btn btn-sm btn-primary" id="check-local-arg-arg" type="button" role="button">Now logMe is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-arg-arg" id="show-local-arg-arg" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-arg-global" type="button" role="button">Now aString is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-arg-global" id="show-local-arg-global" readonly>
						    <!-- <p class="help-block">Example block-level help text here.</p> -->
						  </div>
						</form>
						<p>Important to note is that function arguments are local even when you pass a variable as an argument (input) into a function.</p>
						<p>Functions receive their own local copies of argument variables to work with. Whatever happens with that local variable won't affect the original version. In other words, if you pass a variable into a function as an argument, the function can do whatever it wants and the original variable won't change.</p>
						<p>Note that this is different from how global variables work! Compare this to the first example in the Global Scope section above.</p>
						<div class="well">
							<span id="var-local-copies-global">var x = 3;</span><br />
							<span id="scope-local-copies-global"><br />
							function doSomething(<span id="var-local-copies-arg">num</span>) {<br />
							<span id="scope-local-copies-arg"><span class="indent"></span>// Point B<br />
							<span class="indent"></span>num = num + 2; // Not what you put in...<br />
							<span class="indent"></span>console.log(num);<br />
							<span class="indent"></span> // Point C</span><br />
							}<br />
							<br />
							// Point A<br />
							console.log(x);<br />
							doSomething(x);<br />
							// Point D<br />
							console.log(x);</span>
						</div>
						<form>
							<p>At Point A:</p>
							<button class="btn btn-sm btn-primary" id="check-local-copies-globalA" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-globalA" id="show-local-copies-globalA" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-copies-argA" type="button" role="button">Now num is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-argA" id="show-local-copies-argA" readonly>
							<p>At Point B:</p>
							<button class="btn btn-sm btn-primary" id="check-local-copies-globalB" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-globalB" id="show-local-copies-globalB" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-copies-argB" type="button" role="button">Now num is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-argB" id="show-local-copies-argB" readonly>
							<p>At Point C:</p>
							<button class="btn btn-sm btn-primary" id="check-local-copies-globalC" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-globalC" id="show-local-copies-globalC" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-copies-argC" type="button" role="button">Now num is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-argC" id="show-local-copies-argC" readonly>
							<p>At Point D:</p>
							<button class="btn btn-sm btn-primary" id="check-local-copies-globalD" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-globalD" id="show-local-copies-globalD" readonly>
							<span class="longspace"></span>
							<button class="btn btn-sm btn-primary" id="check-local-copies-argD" type="button" role="button">Now num is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-copies-argD" id="show-local-copies-argD" readonly><br />
							<br />
						</form>
						<p>Understanding the difference between how global and local variables are each modified can make a big difference when you're programming...</p>
					</div>
					<div id="how-shadowing">
						<h3>Shadowing</h3>
						<p>So what happens if we make a function and declare a local variable with the same name as a global variable? What happens if we modify that local variable?</p>
						<div class="well">
							<span title="???">var x = 3;</span><br />
							function doSomething() {<br />
							<span class="indent"></span><span title="???">var x = 5;</span><br />
							<span class="indent"></span>x = x + 2;<br />
							}<br />
							doSomething();<br />
							console.log(x);<br />
						</div>
						<p>The answer is: <strong>Don’t do this.</strong> No, seriously, don’t. This is known as <em>shadowing</em> or <em>overshadowing</em>, and it’s considered bad practice because it’s confusing and what happens is largely dependent on the language (or possibly even something less consistent than a language specification). That means it's hard to know what to expect, which is very bad for reasoning about and understanding code!</p>
						<p>The same applies for declaring arguments for a function and then declaring variables with the same name as the argument. The same problems may occur.</p>
						<div class="well">
							function printAThing(<span title="???">logMe</span>) {<br />
							<span class="indent"></span><span title="???">var logMe = "I’m not what you originally gave me!"</span><br />
							<span class="indent"></span>console.log(logMe);<br />
							}<br />
							printAThing("I’m trying to call printAThing.");
						</div>
						<p>A good general rule of thumb for programming: if you can’t understand what’s going on in a program, it’s probably not a good idea in practice - especially when it’s probably easy to just change the names of what you call the function input anyway.</p>
					</div>
					<div id="how-hoisting">
						<h3>Hoisting & Block Scope...Not!</h3>
						<p>In Javascript (but not necessarily in other programming languages!) all variables and functions are declared at the start of the program in secret, behind the curtain. Variables are not <em>initialized</em> until you say so, however.</p>
						<p>This means that you can reference a variable before you even declare it officially and you won't run into an error, although you won't get a real value either:</p>
						<div class="well">
							console.log(x);<br />
							// Point A<br />
							<span id="var-local-hoisting1-global">var x = 3;</span><br />
							<span id="scope-local-hoisting1-global">
							console.log(x);<br />
							// Point B</span>
						</div>
						<form>
							<p>At Point A:</p>
							<button class="btn btn-sm btn-primary" id="check-local-hoisting1-globalA" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-hoisting1-globalA" id="show-local-hoisting1-globalA" readonly>
							<p>At Point B:</p>
							<button class="btn btn-sm btn-primary" id="check-local-hoisting1-globalB" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-hoisting1-globalB" id="show-local-hoisting1-globalB" readonly>
						</form>
						<p>This is roughly equivalent to doing the following:</p>
						<div class="well">
							var x;<br />
							console.log(x);<br />
							// Point A<br />
							<span id="var-local-hoisting2-global">x = 3;</span><br />
							<span id="scope-local-hoisting2-global">console.log(x);<br />
							// Point B</span>
						</div>
						<p>Should you do this? Generally, it's not a good idea to reference variables before you declare them in a file. But this does allow you to reference basic functions anywhere in a program though! Functions, too, are global unless you declare them inside another structure...</p>
						<p>A consequence of Javascript hoisting is that new, more local scopes are only created within functions. Variables created within <code>if</code>, <code>for</code>, and <code>while</code> blocks are not local to those blocks.</p>
						<div class="well">
							if(true) {<br />
							<span class="indent"></span><span id="var-local-block-true">var printMe = "Hello!";</span><br />
							<span id="scope-local-block-true">}<br />
							console.log(printMe);</span><br />
						</div>
						<form>
						<button class="btn btn-sm btn-primary" id="check-local-block-true" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-block-true" id="show-local-block-true" readonly>
						</form>
						<div class="well">
							if(false) {<br />
							<span class="indent"></span><span id="var-local-block-false">var printMe = "Hello!";</span><br />
							<!-- <span id="scope-local-block-false"> -->
							}<br />
							console.log(printMe);<br />
							<!-- </span> -->
						</div>
						<button class="btn btn-sm btn-primary" id="check-local-block-false" type="button" role="button">Now x is...</button><span class="space"></span><input type="text" class="valueCheck" name="show-local-block-false" id="show-local-block-false" readonly>
						<p>Javascript is a little bit quirky in this sense. In other popular programming languages variables declared within a block are local within to that block, and they are said to be within "block scope." Because Javascript hoists variables, however, block scope doesn't exist in Javascript!</p>
						<p>This trips up many people who learned other programming languages before learning Javascript, and people who learn Javascript and go on to learn other programming languages. Block script isn't really important if you only program in Javascript, but remember it if you try another language in the future...</p>
					</div>
				</div>
			</div>
		</div>
		<div class="container" id="try">
			<div class="row">
				<div class="col-md-12 col-lg-12 col-sm-12">
					<h2>Test Your Understanding</h2>
					<p>Click on each line of code to highlight it.</p>
					<p>For each question, type your answer into the provided text box. For answers about string values, <em>don't</em> use quotation marks.</p>
					<p>Use the Check button to see if you understand how Javascript scope works!</p>
					<div class="panel panel-default" id="try-1">
						<div class="panel-body">
							<strong>Please highlight the lines where <code>y</code> is in scope.</strong>
							<div class="well">
								<span class="highlightable">var x = 3;</span><br />
								<span class="highlightable">function foo(){</span><br />
								<span class="highlightable"><span class="indent"></span>var y = 4;</span><br />
								<span class="highlightable"><span class="indent"></span>x = x + y;</span><br />
								<span class="highlightable"><span class="indent"></span>console.log(x);</span><br />
								<span class="highlightable">}</span>
							</div>
							<form>
							  	<div class="form-group">
								    <label for="answer-1-1">What is the value of <code>x</code>?</label>
									<input type="text" name="answer-1-1" id="answer-1-1">
								    <!-- <p class="help-block">Example block-level help text here.</p> -->
							  	</div>
							</form>
							<button class="btn btn-sm btn-primary" type="button" role="button">Check</button>
							<div class="feedback" id="feedback-1"></div>
						</div>
					</div>
					<div class="panel panel-default" id="try-2">
						<div class="panel-body">
							<strong>Please highlight the lines where <code>myName</code> is in scope.</strong>
							<div class="well">
								<span class="highlightable">var myName = "Carmen";</span><br />
								<span class="highlightable">function mistakenHello(name) {</span><br />
								<span class="highlightable"><span class="indent"></span>name = "Jo";</span><br />
								<span class="highlightable"><span class="indent"></span>console.log("Hello " + name + "!");</span><br />
								<span class="highlightable">}</span><br />
								<span class="highlightable">mistakenHello(myName);</span><br />
							</div>
							<form>
								<div class="form-group">
								    <label for="answer-2-1">What gets printed when we call <code>mistakenHello(myName)</code>?</label>
									<input type="text" name="answer-2-1" id="answer-2-1">
							    	<!-- <p class="help-block">Example block-level help text here.</p> -->
							  	</div>
							  	<div class="form-group">
								    <label for="answer-2-2">What is the value of <code>myName</code> at the end of this program?</label>
									<input type="text" name="answer-2-2" id="answer-2-2">
								    <!-- <p class="help-block">Example block-level help text here.</p> -->
							  	</div>
							</form>
							<button class="btn btn-sm btn-primary" type="button" role="button">Check</button>
							<div class="feedback" id="feedback-2"></div>
						</div>
					</div>
					<div class="panel panel-default" id="try-3">
						<div class="panel-body">
							<strong>Please highlight the lines where <code>arg</code> is in scope.</strong>
							<div class="well">
								<span class="highlightable">function doThing(anArg) {</span><br />
								<span class="highlightable"><span class="indent"></span>console.log(anArg);</span><br />
								<span class="highlightable">}</span><br />
								<br />
								<span class="highlightable">function doAnotherThing(arg) {</span><br />
								<span class="highlightable">var oneMoreThing = "Aiyaaaaa Jackie!";</span><br />
								<span class="highlightable"><span class="indent"></span>console.log(oneMoreThing);</span><br />
								<span class="highlightable"><span class="indent"></span>arg = "No more!";</span><br />
								<span class="highlightable"><span class="indent"></span>console.log(arg);</span><br />
								<span class="highlightable">}</span><br />
								<br />
								<span class="highlightable">var x = 15;</span><br />
								<span class="highlightable">doThing(x);</span><br />
								<span class="highlightable">doAnotherThing(x);</span><br />
								<span class="highlightable">console.log(x);</span>
							</div>
							<form>
								<p>The above program has four lines of output. Please fill them in below.</p>
							  	<div class="form-group">
								    <label for="answer-3-1">Line 1:</label>
									<input type="text" name="answer-3-1" id="answer-3-1">
							 	 </div>
							  	<div class="form-group">
								    <label for="answer-3-2">Line 2:</label>
									<input type="text" name="answer-3-2" id="answer-3-2">
							  	</div>
							  	<div class="form-group">
								    <label for="answer-3-3">Line 3:</label>
									<input type="text" name="answer-3-3" id="answer-3-3">
							 	</div>
							  	<div class="form-group">
								    <label for="answer-3-4">Line 4:</label>
									<input type="text" name="answer-3-4" id="answer-3-4">
							 	</div>
							</form>
							<button class="btn btn-sm btn-primary" type="button" role="button">Check</button>
							<div class="feedback" id="feedback-3"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="problemData.js"></script>
		<script src="final.js"></script>
	</body>
</html>